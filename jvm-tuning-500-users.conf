# JVM Configuration for ERP System - 500 Concurrent Users
# Add these JVM arguments when starting your application server

# Memory Settings (Assuming 8GB+ RAM available)
-Xms2048m
-Xmx4096m
-XX:MetaspaceSize=256m
-XX:MaxMetaspaceSize=512m

# Garbage Collection Settings (G1GC for low-latency, high-throughput)
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=16m
-XX:G1NewSizePercent=30
-XX:G1MaxNewSizePercent=40
-XX:G1MixedGCCountTarget=8
-XX:InitiatingHeapOccupancyPercent=45

# Performance Optimizations
-XX:+UseBiasedLocking
-XX:+OptimizeStringConcat
-XX:+UseStringDeduplication
-XX:+UseCompressedOops
-XX:+UseCompressedClassPointers

# Thread and Concurrency Settings
-XX:ConcGCThreads=4
-XX:ParallelGCThreads=8
-XX:+UseLargePages
-XX:LargePageSizeInBytes=2m

# Memory Management for High Concurrency
-XX:+AlwaysPreTouch
-XX:+UseTransparentHugePages
-XX:+UnlockExperimentalVMOptions
-XX:+UseCGroupMemoryLimitForHeap

# Monitoring and Debugging (Enable for production monitoring)
-XX:+PrintGC
-XX:+PrintGCDetails
-XX:+PrintGCTimeStamps
-XX:+PrintGCApplicationStoppedTime
-Xloggc:logs/gc.log
-XX:+UseGCLogFileRotation
-XX:NumberOfGCLogFiles=5
-XX:GCLogFileSize=10M

# JMX Monitoring (for performance monitoring tools)
-Dcom.sun.management.jmxremote
-Dcom.sun.management.jmxremote.port=9999
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false

# Application-specific settings
-Dfile.encoding=UTF-8
-Duser.timezone=UTC
-Djava.awt.headless=true
-Djava.security.egd=file:/dev/./urandom

# Connection Pool and Database Optimizations
-Dhikaricp.maxPoolSize=150
-Dhikaricp.minimumIdle=25
-Dpostgresql.defaultRowFetchSize=100

# Cache Settings for EHCache
-Dnet.sf.ehcache.skipUpdateCheck=true
-Dnet.sf.ehcache.disabled=false

# Example startup command:
# java -server @jvm-tuning-500-users.conf -jar your-application.war
